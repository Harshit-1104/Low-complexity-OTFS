module naturallog(u0, lnofu0);
input [47:0] u0;
output reg[31:0] lnofu0;

reg  [5 :0]             exp_e               ;
reg  [7 :0]             xm_e                ;
reg  [23:0]             xl_e                ;

reg  [5 :0]             exp_e_r             ;
reg  [7 :0]             xm_e_r              ;
reg  [23:0]             xl_e_r              ;

always @(posedge clock or negedge rst_n)
  if(!rst_n)
  begin
    exp_e_r <= #1 6'h0;
    xm_e_r  <= #1 8'h0;
    xl_e_r  <= #1 24'h0;
  end
  else
  begin
    exp_e_r <= #1 exp_e;
    xm_e_r  <= #1 xm_e;
    xl_e_r  <= #1 xl_e;
  end

always @(*)
  casez(u0)
    48'b1???_????_????_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd1 ; xm_e = u0[46:39]; xl_e=u0[38:15]; end
    48'b01??_????_????_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd2 ; xm_e = u0[45:38]; xl_e=u0[37:14]; end
    48'b001?_????_????_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd3 ; xm_e = u0[44:37]; xl_e=u0[36:13]; end
    48'b0001_????_????_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd4 ; xm_e = u0[43:36]; xl_e=u0[35:12]; end
    48'b0000_1???_????_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd5 ; xm_e = u0[42:35]; xl_e=u0[34:11]; end
    48'b0000_01??_????_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd6 ; xm_e = u0[41:34]; xl_e=u0[33:10]; end
    48'b0000_001?_????_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd7 ; xm_e = u0[40:33]; xl_e=u0[32: 9]; end
    48'b0000_0001_????_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd8 ; xm_e = u0[39:32]; xl_e=u0[31: 8]; end
    48'b0000_0000_1???_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd9 ; xm_e = u0[38:31]; xl_e=u0[30: 7]; end
    48'b0000_0000_01??_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd10; xm_e = u0[37:30]; xl_e=u0[29: 6]; end
    48'b0000_0000_001?_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd11; xm_e = u0[36:29]; xl_e=u0[28: 5]; end
    48'b0000_0000_0001_????_????_????_????_????_????_????_????_???? : begin exp_e = 6'd12; xm_e = u0[35:28]; xl_e=u0[27: 4]; end
    48'b0000_0000_0000_1???_????_????_????_????_????_????_????_???? : begin exp_e = 6'd13; xm_e = u0[34:27]; xl_e=u0[26: 3]; end
    48'b0000_0000_0000_01??_????_????_????_????_????_????_????_???? : begin exp_e = 6'd14; xm_e = u0[33:26]; xl_e=u0[25: 2]; end
    48'b0000_0000_0000_001?_????_????_????_????_????_????_????_???? : begin exp_e = 6'd15; xm_e = u0[32:25]; xl_e=u0[24: 1]; end
    48'b0000_0000_0000_0001_????_????_????_????_????_????_????_???? : begin exp_e = 6'd16; xm_e = u0[31:24]; xl_e=u0[23: 0]; end
    48'b0000_0000_0000_0000_1???_????_????_????_????_????_????_???? : begin exp_e = 6'd17; xm_e = u0[30:23]; xl_e={u0[22: 0], 1'h0 }; end
    48'b0000_0000_0000_0000_01??_????_????_????_????_????_????_???? : begin exp_e = 6'd18; xm_e = u0[29:22]; xl_e={u0[21: 0], 2'h0 }; end
    48'b0000_0000_0000_0000_001?_????_????_????_????_????_????_???? : begin exp_e = 6'd19; xm_e = u0[28:21]; xl_e={u0[20: 0], 3'h0 }; end
    48'b0000_0000_0000_0000_0001_????_????_????_????_????_????_???? : begin exp_e = 6'd20; xm_e = u0[27:20]; xl_e={u0[19: 0], 4'h0 }; end
    48'b0000_0000_0000_0000_0000_1???_????_????_????_????_????_???? : begin exp_e = 6'd21; xm_e = u0[26:19]; xl_e={u0[18: 0], 5'h0 }; end
    48'b0000_0000_0000_0000_0000_01??_????_????_????_????_????_???? : begin exp_e = 6'd22; xm_e = u0[25:18]; xl_e={u0[17: 0], 6'h0 }; end
    48'b0000_0000_0000_0000_0000_001?_????_????_????_????_????_???? : begin exp_e = 6'd23; xm_e = u0[24:17]; xl_e={u0[16: 0], 7'h0 }; end
    48'b0000_0000_0000_0000_0000_0001_????_????_????_????_????_???? : begin exp_e = 6'd24; xm_e = u0[23:16]; xl_e={u0[15: 0], 8'h0 }; end
    48'b0000_0000_0000_0000_0000_0000_1???_????_????_????_????_???? : begin exp_e = 6'd25; xm_e = u0[22:15]; xl_e={u0[14: 0], 9'h0 }; end
    48'b0000_0000_0000_0000_0000_0000_01??_????_????_????_????_???? : begin exp_e = 6'd26; xm_e = u0[21:14]; xl_e={u0[13: 0], 10'h0}; end
    48'b0000_0000_0000_0000_0000_0000_001?_????_????_????_????_???? : begin exp_e = 6'd27; xm_e = u0[20:13]; xl_e={u0[12: 0], 11'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0001_????_????_????_????_???? : begin exp_e = 6'd28; xm_e = u0[19:12]; xl_e={u0[11: 0], 12'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_1???_????_????_????_???? : begin exp_e = 6'd29; xm_e = u0[18:11]; xl_e={u0[10: 0], 13'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_01??_????_????_????_???? : begin exp_e = 6'd30; xm_e = u0[17:10]; xl_e={u0[9 : 0], 14'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_001?_????_????_????_???? : begin exp_e = 6'd31; xm_e = u0[16: 9]; xl_e={u0[8 : 0], 15'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0001_????_????_????_???? : begin exp_e = 6'd32; xm_e = u0[15: 8]; xl_e={u0[7 : 0], 16'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_1???_????_????_???? : begin exp_e = 6'd33; xm_e = u0[14: 7]; xl_e={u0[6 : 0], 17'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_01??_????_????_???? : begin exp_e = 6'd34; xm_e = u0[13: 6]; xl_e={u0[5 : 0], 18'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_001?_????_????_???? : begin exp_e = 6'd35; xm_e = u0[12: 5]; xl_e={u0[4 : 0], 19'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0001_????_????_???? : begin exp_e = 6'd36; xm_e = u0[11: 4]; xl_e={u0[3 : 0], 20'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_1???_????_???? : begin exp_e = 6'd37; xm_e = u0[10: 3]; xl_e={u0[2 : 0], 21'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_01??_????_???? : begin exp_e = 6'd38; xm_e = u0[9 : 2]; xl_e={u0[1 : 0], 22'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_001?_????_???? : begin exp_e = 6'd39; xm_e = u0[8 : 1]; xl_e={u0[0 : 0], 23'h0}; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0001_????_???? : begin exp_e = 6'd40; xm_e = u0[7 : 0];        xl_e=24'h0; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_1???_???? : begin exp_e = 6'd41; xm_e ={u0[6:  0], 1'h0}; xl_e=24'h0; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_01??_???? : begin exp_e = 6'd42; xm_e ={u0[5 : 0], 2'h0}; xl_e=24'h0; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_001?_???? : begin exp_e = 6'd43; xm_e ={u0[4 : 0], 3'h0}; xl_e=24'h0; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0001_???? : begin exp_e = 6'd44; xm_e ={u0[3 : 0], 4'h0}; xl_e=24'h0; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_1??? : begin exp_e = 6'd45; xm_e ={u0[2:  0], 5'h0}; xl_e=24'h0; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_01?? : begin exp_e = 6'd46; xm_e ={u0[1 : 0], 6'h0}; xl_e=24'h0; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_001? : begin exp_e = 6'd47; xm_e ={u0[0 : 0], 7'h0}; xl_e=24'h0; end
    48'b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0001 : begin exp_e = 6'd48; xm_e =8'h0; xl_e=24'h0; end
    default                                                         : begin exp_e = 6'd49; xm_e =8'h0; xl_e=24'h0; end
  endcase

wire [7:0]              ce_addr                 ;
wire [64:0]             ce_rdata                ;
wire [29:0]             ce_0                    ;
wire [21:0]             ce_1                    ;
wire [12:0]             ce_2                    ;

assign ce_addr = xm_e_r;
assign ce_0 = ce_rdata[64:35];
assign ce_1 = ce_rdata[34:13];
assign ce_2 = ce_rdata[12:0];

reg  [12:0]             ce_2_r1                 ;
reg  [21:0]             ce_1_r1                 ;
reg  [21:0]             ce_1_r2                 ;
reg  [29:0]             ce_0_r1                 ;
reg  [29:0]             ce_0_r2                 ;
reg  [29:0]             ce_0_r3                 ;
reg  [29:0]             ce_0_r4                 ;
reg  [23:0]             xl_e_r2                 ;
reg  [23:0]             xl_e_r3                 ;
reg  [23:0]             xl_e_r4                 ;
reg  [23:0]             xl_e_r5                 ;

always @(posedge clock)
  begin
    ce_0_r1 <= #1 ce_0;
    ce_0_r2 <= #1 ce_0_r1;
    ce_0_r3 <= #1 ce_0_r2;
    ce_0_r4 <= #1 ce_0_r3;
    ce_1_r1 <= #1 ce_1;
    ce_1_r2 <= #1 ce_1_r1;
    ce_2_r1 <= #1 ce_2;
  end

always @(posedge clock)
  begin
    xl_e_r2 <= #1 xl_e_r;
    xl_e_r3 <= #1 xl_e_r2;
    xl_e_r4 <= #1 xl_e_r3;
    xl_e_r5 <= #1 xl_e_r4;
  end

reg [36:0]              ye_t1             ;

always @(posedge clock)
  ye_t1 <= #1 ce_2_r1 * xl_e_r3;

reg signed [22:0]       ye_t2             ;
reg signed [46:0]       ye_t3             ;

always @(posedge clock)
  ye_t2 <= #1 {10'h0,ye_t1[36:24]} - {1'b0,ce_1_r2};

always @(posedge clock)
  ye_t3 <= #1 ye_t2 * $signed({1'b0,xl_e_r5});

reg signed [30:0]       ye_t4             ;

always @(posedge clock)
  ye_t4 <= #1 {{8{ye_t3[46]}},ye_t3[46:24]} - {1'b0,ce_0_r4};

reg  [5 :0]             exp_e_r2                ;
reg  [5 :0]             exp_e_r3                ;
reg  [5 :0]             exp_e_r4                ;
reg  [5 :0]             exp_e_r5                ;

always @(posedge clock)
  begin
    exp_e_r2 <= #1 exp_e_r;
    exp_e_r3 <= #1 exp_e_r2;
    exp_e_r4 <= #1 exp_e_r3;
    exp_e_r5 <= #1 exp_e_r4;
  end

wire [29:0] ln2 = 31'd744261118; //(0,30,30)

reg  [35:0]             ec                      ;
reg  [35:0]             ec_r1                   ;

always @(posedge clock)
  ec <= #1 exp_e_r5 * ln2;

always @(posedge clock)
  ec_r1 <= #1 ec;

reg  signed [36:0]      yee                     ;

always @(posedge clock)
  yee <= #1 {1'b0,ec_r1} + {{6{ye_t4[30]}},ye_t4};

wire [30:0] e = yee[35:5];
assign lnofu0 = e;
endmodule